<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>library_qlabs_qcar &mdash; Quanser&#39;s Self Driving Car Virtual Studio Documentation 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_collapse.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tablefix.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/tabs.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="../index.html">
            <img src="../_static/quanser_selfdrivingcarstudio.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Getting%20Started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../User%20Interface.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../System/index.html">Python System &amp; Utility Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Objects/index.html">Python Actors Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Code%20Style.html">Code Style</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Quanser's Self Driving Car Virtual Studio Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Module code</a> &raquo;</li>
      <li>library_qlabs_qcar</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for library_qlabs_qcar</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">library_qlabs_common</span> <span class="kn">import</span> <span class="n">QLabsCommon</span>
<span class="kn">from</span> <span class="nn">library_qlabs</span> <span class="kn">import</span> <span class="n">CommModularContainer</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">struct</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        
        
<span class="c1">######################### MODULAR CONTAINER CLASS #########################</span>

<div class="viewcode-block" id="QLabsQCar"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar">[docs]</a><span class="k">class</span> <span class="nc">QLabsQCar</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;This class is for spawning QCars.&quot;&quot;&quot;</span>
    
       
    <span class="n">ID_QCAR</span> <span class="o">=</span> <span class="mi">160</span> 
    <span class="sd">&quot;&quot;&quot; Class ID &quot;&quot;&quot;</span>
    <span class="n">FCN_QCAR_SET_VELOCITY_AND_REQUEST_STATE</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">FCN_QCAR_VELOCITY_STATE_RESPONSE</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="n">FCN_QCAR_SET_TRANSFORM_AND_REQUEST_STATE</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">FCN_QCAR_TRANSFORM_STATE_RESPONSE</span> <span class="o">=</span> <span class="mi">13</span>
    <span class="n">FCN_QCAR_POSSESS</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">FCN_QCAR_POSSESS_ACK</span> <span class="o">=</span> <span class="mi">21</span>
    <span class="n">FCN_QCAR_GHOST_MODE</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">FCN_QCAR_GHOST_MODE_ACK</span> <span class="o">=</span> <span class="mi">23</span>
    <span class="n">FCN_QCAR_CAMERA_DATA_REQUEST</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">FCN_QCAR_CAMERA_DATA_RESPONSE</span> <span class="o">=</span> <span class="mi">101</span>
    <span class="n">FCN_QCAR_LIDAR_DATA_REQUEST</span> <span class="o">=</span> <span class="mi">110</span>
    <span class="n">FCN_QCAR_LIDAR_DATA_RESPONSE</span> <span class="o">=</span> <span class="mi">111</span>
    
    
    <span class="n">CAMERA_CSI_RIGHT</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">CAMERA_CSI_BACK</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">CAMERA_CSI_LEFT</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">CAMERA_CSI_FRONT</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">CAMERA_RGB</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">CAMERA_DEPTH</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">CAMERA_OVERHEAD</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="sd">&quot;&quot;&quot; Note: The mouse scroll wheel can be used to zoom in and out in this mode. &quot;&quot;&quot;</span>
    <span class="n">CAMERA_TRAILING</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="sd">&quot;&quot;&quot; Note: The mouse scroll wheel can be used to zoom in and out in this mode. &quot;&quot;&quot;</span>
    
    <span class="c1"># Initialize class</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Constructor Method &quot;&quot;&quot;</span>
        <span class="k">return</span>
       
<div class="viewcode-block" id="QLabsQCar.spawn"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.spawn">[docs]</a>    <span class="k">def</span> <span class="nf">spawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">waitForConfirmation</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Spawns a QCar in an instance of QLabs at a specific location and rotation using radians.  Note that dynamics are enabled by default. Use set_transform_and_request_state to disable dynamics.</span>

<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param location: An array of floats for x, y and z coordinates in full-scale units. Multiply physical QCar locations by 10 to get full scale locations.</span>
<span class="sd">        :param rotation: An array of floats for the roll, pitch, and yaw in radians</span>
<span class="sd">        :param waitForConfirmation: (Optional) Wait for confirmation of the spawn before proceeding. This makes the method a blocking operation.</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type location: float array[3]</span>
<span class="sd">        :type rotation: float array[3]</span>
<span class="sd">        :type waitForConfirmation: boolean</span>
<span class="sd">        :return: 0 if successful, 1 class not available, 2 actor number not available or already in use, 3 unknown error, -1 communications error</span>
<span class="sd">        :rtype: int32</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">QLabsCommon</span><span class="p">()</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">waitForConfirmation</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="QLabsQCar.spawn_degrees"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.spawn_degrees">[docs]</a>    <span class="k">def</span> <span class="nf">spawn_degrees</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">waitForConfirmation</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Spawns a QCar in an instance of QLabs at a specific location and rotation using degrees. Note that dynamics are enabled by default. Use set_transform_and_request_state to disable dynamics.</span>

<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param location: An array of floats for x, y and z coordinates in full-scale units. Multiply physical QCar locations by 10 to get full scale locations.</span>
<span class="sd">        :param rotation: An array of floats for the roll, pitch, and yaw in degrees</span>
<span class="sd">        :param waitForConfirmation: (Optional) Wait for confirmation of the spawn before proceeding. This makes the method a blocking operation.</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type location: float array[3]</span>
<span class="sd">        :type rotation: float array[3]</span>
<span class="sd">        :type waitForConfirmation: boolean</span>
<span class="sd">        :return: 0 if successful, 1 class not available, 2 actor number not available or already in use, 3 unknown error, -1 communications error</span>
<span class="sd">        :rtype: int32</span>


<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">return</span> <span class="n">QLabsCommon</span><span class="p">()</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span>  <span class="n">location</span><span class="p">,</span> <span class="p">[</span><span class="n">rotation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">waitForConfirmation</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="QLabsQCar.set_transform_and_request_state"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.set_transform_and_request_state">[docs]</a>    <span class="k">def</span> <span class="nf">set_transform_and_request_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">enableDynamics</span><span class="p">,</span> <span class="n">headlights</span><span class="p">,</span> <span class="n">leftTurnSignal</span><span class="p">,</span> <span class="n">rightTurnSignal</span><span class="p">,</span> <span class="n">brakeSignal</span><span class="p">,</span> <span class="n">reverseSignal</span><span class="p">,</span> <span class="n">waitForConfirmation</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the location, rotation, and other car properties. Note that setting the location ignores collisions so ensure that the location is free of obstacles that may trap the actor if it is subsequently used in a dynamic mode. This transform can also be used to &quot;playback&quot; previously recorded position data without the need for a full dynamic model.</span>

<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param location: An array of floats for x, y and z coordinates in full-scale units. Multiply physical QCar locations by 10 to get full scale locations.</span>
<span class="sd">        :param rotation: An array of floats for the roll, pitch, and yaw in radians</span>
<span class="sd">        :param enableDynamics: (default True) Enables or disables gravity for set transform requests.</span>
<span class="sd">        :param headlights: Enable the headlights</span>
<span class="sd">        :param leftTurnSignal: Enable the left turn signal</span>
<span class="sd">        :param rightTurnSignal: Enable the right turn signal</span>
<span class="sd">        :param brakeSignal: Enable the brake lights (does not affect the motion of the vehicle)</span>
<span class="sd">        :param reverseSignal: Play a honking sound</span>
<span class="sd">        :param waitForConfirmation: (Optional) Wait for confirmation of the spawn before proceeding. This makes the method a blocking operation.</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type location: float array[3]</span>
<span class="sd">        :type rotation: float array[3]</span>
<span class="sd">        :type enableDynamics: boolean</span>
<span class="sd">        :type headlights: boolean</span>
<span class="sd">        :type leftTurnSignal: boolean</span>
<span class="sd">        :type rightTurnSignal: boolean</span>
<span class="sd">        :type brakeSignal: boolean</span>
<span class="sd">        :type reverseSignal: boolean</span>
<span class="sd">        :type waitForConfirmation: boolean</span>
<span class="sd">        :return: True if successful or False otherwise, location in full scale, rotation in radians, unit forward vector, unit up vector, front bumper hit, rear bumper hit. Data only valid if waitForConfirmation=True.</span>
<span class="sd">        :rtype: boolean, float array[3], float array[3], float array[3], float array[3], boolean, boolean</span>

<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">c</span> <span class="o">=</span> <span class="n">CommModularContainer</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">classID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorNumber</span> <span class="o">=</span> <span class="n">actorNumber</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorFunction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_SET_TRANSFORM_AND_REQUEST_STATE</span>
        <span class="n">c</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;ffffffBBBBBB&quot;</span><span class="p">,</span> <span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">enableDynamics</span><span class="p">,</span> <span class="n">headlights</span><span class="p">,</span> <span class="n">leftTurnSignal</span><span class="p">,</span> <span class="n">rightTurnSignal</span><span class="p">,</span> <span class="n">brakeSignal</span><span class="p">,</span> <span class="n">reverseSignal</span><span class="p">))</span>
        <span class="n">c</span><span class="o">.</span><span class="n">containerSize</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">BASE_CONTAINER_SIZE</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span>
        

        <span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">forward_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">up_vector</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">frontHit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">rearHit</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">waitForConfirmation</span><span class="p">:</span>
            <span class="n">qlabs</span><span class="o">.</span><span class="n">flush_receive</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">qlabs</span><span class="o">.</span><span class="n">send_container</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">waitForConfirmation</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">qlabs</span><span class="o">.</span><span class="n">wait_for_container</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_TRANSFORM_STATE_RESPONSE</span><span class="p">)</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">forward_vector</span><span class="p">,</span> <span class="n">up_vector</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span> <span class="o">==</span> <span class="mi">50</span><span class="p">:</span>
                    
                    <span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">forward_vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">forward_vector</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">forward_vector</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">up_vector</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">up_vector</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">up_vector</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;ffffffffffff??&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">50</span><span class="p">])</span>
                    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">forward_vector</span><span class="p">,</span> <span class="n">up_vector</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span>  
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">forward_vector</span><span class="p">,</span> <span class="n">up_vector</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">forward_vector</span><span class="p">,</span> <span class="n">up_vector</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span>  
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">forward_vector</span><span class="p">,</span> <span class="n">up_vector</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span>  </div>

<div class="viewcode-block" id="QLabsQCar.set_transform_and_request_state_degrees"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.set_transform_and_request_state_degrees">[docs]</a>    <span class="k">def</span> <span class="nf">set_transform_and_request_state_degrees</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">enableDynamics</span><span class="p">,</span> <span class="n">headlights</span><span class="p">,</span> <span class="n">leftTurnSignal</span><span class="p">,</span> <span class="n">rightTurnSignal</span><span class="p">,</span> <span class="n">brakeSignal</span><span class="p">,</span> <span class="n">reverseSignal</span><span class="p">,</span> <span class="n">waitForConfirmation</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the location, rotation, and other car properties. Note that setting the location ignores collisions so ensure that the location is free of obstacles that may trap the actor if it is subsequently used in a dynamic mode. This transform can also be used to &quot;playback&quot; previously recorded position data without the need for a full dynamic model.</span>

<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param location: An array of floats for x, y and z coordinates in full-scale units. Multiply physical QCar locations by 10 to get full scale locations.</span>
<span class="sd">        :param rotation: An array of floats for the roll, pitch, and yaw in degrees</span>
<span class="sd">        :param enableDynamics: (default True) Enables or disables gravity for set transform requests.</span>
<span class="sd">        :param headlights: Enable the headlights</span>
<span class="sd">        :param leftTurnSignal: Enable the left turn signal</span>
<span class="sd">        :param rightTurnSignal: Enable the right turn signal</span>
<span class="sd">        :param brakeSignal: Enable the brake lights (does not affect the motion of the vehicle)</span>
<span class="sd">        :param reverseSignal: Play a honking sound</span>
<span class="sd">        :param waitForConfirmation: (Optional) Wait for confirmation of the spawn before proceeding. This makes the method a blocking operation.</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type location: float array[3]</span>
<span class="sd">        :type rotation: float array[3]</span>
<span class="sd">        :type enableDynamics: boolean</span>
<span class="sd">        :type headlights: boolean</span>
<span class="sd">        :type leftTurnSignal: boolean</span>
<span class="sd">        :type rightTurnSignal: boolean</span>
<span class="sd">        :type brakeSignal: boolean</span>
<span class="sd">        :type reverseSignal: boolean</span>
<span class="sd">        :type waitForConfirmation: boolean</span>
<span class="sd">        :return: True if successful or False otherwise, location in full scale, rotation in degrees, unit forward vector, unit up vector, front bumper hit, rear bumper hit. Data only valid if waitForConfirmation=True.</span>
<span class="sd">        :rtype: boolean, float array[3], float array[3], float array[3], float array[3], boolean, boolean</span>

<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">success</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">forward_vector</span><span class="p">,</span> <span class="n">up_vector</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_transform_and_request_state</span><span class="p">(</span><span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="p">[</span><span class="n">rotation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">],</span> <span class="n">enableDynamics</span><span class="p">,</span> <span class="n">headlights</span><span class="p">,</span> <span class="n">leftTurnSignal</span><span class="p">,</span> <span class="n">rightTurnSignal</span><span class="p">,</span> <span class="n">brakeSignal</span><span class="p">,</span> <span class="n">reverseSignal</span><span class="p">,</span> <span class="n">waitForConfirmation</span><span class="p">)</span>
        <span class="n">rotation_deg</span> <span class="o">=</span> <span class="p">[</span><span class="n">rotation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">success</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation_deg</span><span class="p">,</span> <span class="n">forward_vector</span><span class="p">,</span> <span class="n">up_vector</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span></div>
            
<div class="viewcode-block" id="QLabsQCar.set_velocity_and_request_state"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.set_velocity_and_request_state">[docs]</a>    <span class="k">def</span> <span class="nf">set_velocity_and_request_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">forward</span><span class="p">,</span> <span class="n">turn</span><span class="p">,</span> <span class="n">headlights</span><span class="p">,</span> <span class="n">leftTurnSignal</span><span class="p">,</span> <span class="n">rightTurnSignal</span><span class="p">,</span> <span class="n">brakeSignal</span><span class="p">,</span> <span class="n">reverseSignal</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the location, rotation, and other car properties. Note that setting the location ignores collisions so ensure that the location is free of obstacles that may trap the actor. This transform can also be used to &quot;playback&quot; previously recorded position data without the need for a full dynamic model.</span>

<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param forward: Speed in m/s of a full-scale car. Multiply physical QCar speeds by 10 to get full scale speeds.</span>
<span class="sd">        :param turn: Turn angle in radians. Positive values turn right.</span>
<span class="sd">        :param headlights: Enable the headlights</span>
<span class="sd">        :param leftTurnSignal: Enable the left turn signal</span>
<span class="sd">        :param rightTurnSignal: Enable the right turn signal</span>
<span class="sd">        :param brakeSignal: Enable the brake lights (does not affect the motion of the vehicle)</span>
<span class="sd">        :param reverseSignal: Play a honking sound</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type actorNumber: float</span>
<span class="sd">        :type turn: float</span>
<span class="sd">        :type enableDynamics: boolean</span>
<span class="sd">        :type headlights: boolean</span>
<span class="sd">        :type leftTurnSignal: boolean</span>
<span class="sd">        :type rightTurnSignal: boolean</span>
<span class="sd">        :type brakeSignal: boolean</span>
<span class="sd">        :type reverseSignal: boolean</span>
<span class="sd">        :return: True or False if successful, location, rotation in radians, front bumper hit, rear bumper hit</span>
<span class="sd">        :rtype: boolean, float array[3], float array[3], boolean, boolean</span>


<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">c</span> <span class="o">=</span> <span class="n">CommModularContainer</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">classID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorNumber</span> <span class="o">=</span> <span class="n">actorNumber</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorFunction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_SET_VELOCITY_AND_REQUEST_STATE</span>
        <span class="n">c</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;ffBBBBB&quot;</span><span class="p">,</span> <span class="n">forward</span><span class="p">,</span> <span class="n">turn</span><span class="p">,</span> <span class="n">headlights</span><span class="p">,</span> <span class="n">leftTurnSignal</span><span class="p">,</span> <span class="n">rightTurnSignal</span><span class="p">,</span> <span class="n">brakeSignal</span><span class="p">,</span> <span class="n">reverseSignal</span><span class="p">))</span>
        <span class="n">c</span><span class="o">.</span><span class="n">containerSize</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">BASE_CONTAINER_SIZE</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span>
        
        <span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">frontHit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">rearHit</span> <span class="o">=</span> <span class="kc">False</span>
        

        <span class="n">qlabs</span><span class="o">.</span><span class="n">flush_receive</span><span class="p">()</span>  
        
        <span class="k">if</span> <span class="p">(</span><span class="n">qlabs</span><span class="o">.</span><span class="n">send_container</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">qlabs</span><span class="o">.</span><span class="n">wait_for_container</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_VELOCITY_STATE_RESPONSE</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span>  

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span> <span class="o">==</span> <span class="mi">26</span><span class="p">:</span>
                <span class="n">location</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">location</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">location</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;&gt;ffffff??&quot;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">26</span><span class="p">])</span>
                <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span>  
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span>  
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span>  </div>
            

<div class="viewcode-block" id="QLabsQCar.set_velocity_and_request_state_degrees"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.set_velocity_and_request_state_degrees">[docs]</a>    <span class="k">def</span> <span class="nf">set_velocity_and_request_state_degrees</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">forward</span><span class="p">,</span> <span class="n">turn</span><span class="p">,</span> <span class="n">headlights</span><span class="p">,</span> <span class="n">leftTurnSignal</span><span class="p">,</span> <span class="n">rightTurnSignal</span><span class="p">,</span> <span class="n">brakeSignal</span><span class="p">,</span> <span class="n">reverseSignal</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the location, rotation, and other car properties. Note that setting the location ignores collisions so ensure that the location is free of obstacles that may trap the actor. This transform can also be used to &quot;playback&quot; previously recorded position data without the need for a full dynamic model.</span>

<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param forward: Speed in m/s of a full-scale car. Multiply physical QCar speeds by 10 to get full scale speeds.</span>
<span class="sd">        :param turn: Turn angle in degrees. Positive values turn right.</span>
<span class="sd">        :param headlights: Enable the headlights</span>
<span class="sd">        :param leftTurnSignal: Enable the left turn signal</span>
<span class="sd">        :param rightTurnSignal: Enable the right turn signal</span>
<span class="sd">        :param brakeSignal: Enable the brake lights (does not affect the motion of the vehicle)</span>
<span class="sd">        :param reverseSignal: Play a honking sound</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type actorNumber: float</span>
<span class="sd">        :type turn: float</span>
<span class="sd">        :type enableDynamics: boolean</span>
<span class="sd">        :type headlights: boolean</span>
<span class="sd">        :type leftTurnSignal: boolean</span>
<span class="sd">        :type rightTurnSignal: boolean</span>
<span class="sd">        :type brakeSignal: boolean</span>
<span class="sd">        :type reverseSignal: boolean</span>
<span class="sd">        :return: True or False if successful, location, rotation in degrees, front bumper hit, rear bumper hit</span>
<span class="sd">        :rtype: boolean, float array[3], float array[3], boolean, boolean</span>


<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">success</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_velocity_and_request_state</span><span class="p">(</span><span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">forward</span><span class="p">,</span> <span class="n">turn</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">headlights</span><span class="p">,</span> <span class="n">leftTurnSignal</span><span class="p">,</span> <span class="n">rightTurnSignal</span><span class="p">,</span> <span class="n">brakeSignal</span><span class="p">,</span> <span class="n">reverseSignal</span><span class="p">)</span>

        <span class="n">rotation_deg</span> <span class="o">=</span> <span class="p">[</span><span class="n">rotation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">success</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation_deg</span><span class="p">,</span> <span class="n">frontHit</span><span class="p">,</span> <span class="n">rearHit</span> </div>
            
<div class="viewcode-block" id="QLabsQCar.possess"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.possess">[docs]</a>    <span class="k">def</span> <span class="nf">possess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">camera</span><span class="o">=</span><span class="n">CAMERA_TRAILING</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Possess (take control of) a QCar in QLabs with the selected camera.</span>
<span class="sd">        </span>
<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param camera: Pre-defined camera constant. See CAMERA constants for available options. Default is the trailing camera.</span>
<span class="sd">        :type qlabs: object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type camera: uint32</span>
<span class="sd">        :return: `True` if possessing the camera was successful, `False` otherwise</span>
<span class="sd">        :rtype: boolean</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">CommModularContainer</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">classID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorNumber</span> <span class="o">=</span> <span class="n">actorNumber</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorFunction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_POSSESS</span>
        <span class="n">c</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;B&quot;</span><span class="p">,</span> <span class="n">camera</span><span class="p">))</span>
        <span class="n">c</span><span class="o">.</span><span class="n">containerSize</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">BASE_CONTAINER_SIZE</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span>
        
        <span class="n">qlabs</span><span class="o">.</span><span class="n">flush_receive</span><span class="p">()</span>  
        
        <span class="k">if</span> <span class="p">(</span><span class="n">qlabs</span><span class="o">.</span><span class="n">send_container</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">qlabs</span><span class="o">.</span><span class="n">wait_for_container</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_POSSESS_ACK</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>    </div>

<div class="viewcode-block" id="QLabsQCar.ghost_mode"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.ghost_mode">[docs]</a>    <span class="k">def</span> <span class="nf">ghost_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ghost mode changes the selected QCar actor into a transparent coloured version. This can be useful as a reference actor or indicating a change in state.</span>
<span class="sd">        </span>
<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param enable: Set the QCar to the defined transparent colour, otherwise revert to the solid color scheme.</span>
<span class="sd">        :param colour: Red, Green, Blue components of the RGB color on a 0.0 to 1.0 scale.</span>
<span class="sd">        :type qlabs: object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type camera: uint32</span>
<span class="sd">        :type enable: boolean</span>
<span class="sd">        :type colour: float array[3]</span>
<span class="sd">        :return: `True` if successful, `False` otherwise</span>
<span class="sd">        :rtype: boolean</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">CommModularContainer</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">classID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorNumber</span> <span class="o">=</span> <span class="n">actorNumber</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorFunction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_GHOST_MODE</span>
        <span class="n">c</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;Bfff&quot;</span><span class="p">,</span> <span class="n">enable</span><span class="p">,</span> <span class="n">colour</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">colour</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">colour</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
        <span class="n">c</span><span class="o">.</span><span class="n">containerSize</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">BASE_CONTAINER_SIZE</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span>
        
        <span class="n">qlabs</span><span class="o">.</span><span class="n">flush_receive</span><span class="p">()</span>  
        
        <span class="k">if</span> <span class="p">(</span><span class="n">qlabs</span><span class="o">.</span><span class="n">send_container</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">qlabs</span><span class="o">.</span><span class="n">wait_for_container</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_GHOST_MODE_ACK</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>             </div>

<div class="viewcode-block" id="QLabsQCar.get_image"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.get_image">[docs]</a>    <span class="k">def</span> <span class="nf">get_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">camera</span><span class="p">):</span>   
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Request a JPG image from one of the QCar cameras.</span>
<span class="sd">        </span>
<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param camera: Pre-defined camera constant. See CAMERA constants for available options. Trailing and Overhead cameras cannot be selected.</span>
<span class="sd">        :type qlabs: object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type camera: uint32</span>
<span class="sd">        :return: `True` and image data if successful, `False` and empty otherwise</span>
<span class="sd">        :rtype: boolean, byte array with jpg data</span>

<span class="sd">        &quot;&quot;&quot;</span>        
    
        <span class="n">c</span> <span class="o">=</span> <span class="n">CommModularContainer</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">classID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorNumber</span> <span class="o">=</span> <span class="n">actorNumber</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorFunction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_CAMERA_DATA_REQUEST</span>
        <span class="n">c</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s2">&quot;&gt;I&quot;</span><span class="p">,</span> <span class="n">camera</span><span class="p">))</span>
        <span class="n">c</span><span class="o">.</span><span class="n">containerSize</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">BASE_CONTAINER_SIZE</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span>
        
        <span class="n">qlabs</span><span class="o">.</span><span class="n">flush_receive</span><span class="p">()</span>  
        
        <span class="k">if</span> <span class="p">(</span><span class="n">qlabs</span><span class="o">.</span><span class="n">send_container</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">qlabs</span><span class="o">.</span><span class="n">wait_for_container</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_CAMERA_DATA_RESPONSE</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span>


            <span class="n">jpg_buffer</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imdecode</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)]),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span> <span class="n">count</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
            
            
            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">jpg_buffer</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span></div>
            
<div class="viewcode-block" id="QLabsQCar.get_lidar"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.get_lidar">[docs]</a>    <span class="k">def</span> <span class="nf">get_lidar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="n">samplePoints</span><span class="o">=</span><span class="mi">400</span><span class="p">):</span>   
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Request LIDAR data from a QCar.</span>
<span class="sd">        </span>
<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :param samplePoints: (Optional) Change the number of points per revolution of the LIDAR.</span>
<span class="sd">        :type qlabs: object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :type samplePoints: uint32</span>
<span class="sd">        :return: `True`, angles in radians, and distances in m if successful, `False`, none, and none otherwise</span>
<span class="sd">        :rtype: boolean, float array, float array</span>

<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">LIDAR_SAMPLES</span> <span class="o">=</span> <span class="mi">4096</span>
        <span class="n">LIDAR_RANGE</span> <span class="o">=</span> <span class="mi">80</span>
        
        <span class="c1"># The LIDAR is simulated by using 4 orthogonal virtual cameras that are 1 pixel high. The</span>
        <span class="c1"># lens distortion of these cameras must be removed to accurately calculate the XY position</span>
        <span class="c1"># of the depth samples.</span>
        <span class="n">quarter_angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">LIDAR_SAMPLES</span><span class="o">/</span><span class="mi">8</span><span class="p">))</span>
        <span class="n">lens_curve</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.0077</span><span class="o">*</span><span class="n">quarter_angle</span><span class="o">*</span><span class="n">quarter_angle</span> <span class="o">+</span> <span class="mf">1.3506</span><span class="o">*</span><span class="n">quarter_angle</span>
        <span class="n">lens_curve_rad</span> <span class="o">=</span> <span class="n">lens_curve</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span>
    
        <span class="n">angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">4</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">lens_curve_rad</span><span class="p">),</span> \
                                 <span class="n">lens_curve_rad</span><span class="p">,</span> \
                                 <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">lens_curve_rad</span><span class="p">)),</span> \
                                 <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">lens_curve_rad</span><span class="p">),</span> \
                                 <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">lens_curve_rad</span><span class="p">)),</span> \
                                 <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">+</span> <span class="n">lens_curve_rad</span><span class="p">),</span> \
                                 <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">lens_curve_rad</span><span class="p">)),</span> \
                                 <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">lens_curve_rad</span><span class="p">)))</span>


   
        <span class="n">c</span> <span class="o">=</span> <span class="n">CommModularContainer</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">classID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorNumber</span> <span class="o">=</span> <span class="n">actorNumber</span>
        <span class="n">c</span><span class="o">.</span><span class="n">actorFunction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_LIDAR_DATA_REQUEST</span>
        <span class="n">c</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">containerSize</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">BASE_CONTAINER_SIZE</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span>
        
        <span class="n">qlabs</span><span class="o">.</span><span class="n">flush_receive</span><span class="p">()</span>  
        
        <span class="k">if</span> <span class="p">(</span><span class="n">qlabs</span><span class="o">.</span><span class="n">send_container</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">qlabs</span><span class="o">.</span><span class="n">wait_for_container</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">FCN_QCAR_LIDAR_DATA_RESPONSE</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            
            <span class="k">if</span> <span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">!=</span> <span class="n">LIDAR_SAMPLES</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Received </span><span class="si">{}</span><span class="s2"> bytes, expected </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">),</span> <span class="n">LIDAR_SAMPLES</span><span class="o">*</span><span class="mi">2</span><span class="p">))</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">LIDAR_SAMPLES</span><span class="p">)</span>
            
            <span class="n">LidarAngle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">LIDAR_SAMPLES</span><span class="o">/</span><span class="mi">4</span><span class="p">));</span>

            
            <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">LIDAR_SAMPLES</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">distance</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="mi">4</span><span class="o">+</span><span class="n">count</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">256</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">payload</span><span class="p">[</span><span class="mi">5</span><span class="o">+</span><span class="n">count</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span><span class="o">/</span><span class="mi">65535</span><span class="o">*</span><span class="n">LIDAR_RANGE</span>             


            <span class="c1"># Resample the data using a linear radial distribution to the desired number of points</span>
            <span class="c1"># and realign the first index to be 0 (forward)</span>
            <span class="n">sampled_angles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">samplePoints</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">sampled_distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="n">samplePoints</span><span class="p">)</span>
            
            <span class="n">index_raw</span> <span class="o">=</span> <span class="mi">512</span>
            <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">samplePoints</span><span class="p">):</span>
                <span class="k">while</span> <span class="p">(</span><span class="n">angles</span><span class="p">[</span><span class="n">index_raw</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">sampled_angles</span><span class="p">[</span><span class="n">count</span><span class="p">]):</span>
                    <span class="n">index_raw</span> <span class="o">=</span> <span class="p">(</span><span class="n">index_raw</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4096</span>
                
                    
                <span class="k">if</span> <span class="n">index_raw</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">angles</span><span class="p">[</span><span class="n">index_raw</span><span class="p">]</span><span class="o">-</span><span class="n">angles</span><span class="p">[</span><span class="n">index_raw</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">sampled_distance</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span><span class="p">[</span><span class="n">index_raw</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">sampled_distance</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">distance</span><span class="p">[</span><span class="n">index_raw</span><span class="p">]</span><span class="o">-</span><span class="n">distance</span><span class="p">[</span><span class="n">index_raw</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">sampled_angles</span><span class="p">[</span><span class="n">count</span><span class="p">]</span><span class="o">-</span><span class="n">angles</span><span class="p">[</span><span class="n">index_raw</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">angles</span><span class="p">[</span><span class="n">index_raw</span><span class="p">]</span><span class="o">-</span><span class="n">angles</span><span class="p">[</span><span class="n">index_raw</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="n">distance</span><span class="p">[</span><span class="n">index_raw</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        
                    
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sampled_distance</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span><span class="p">[</span><span class="n">index_raw</span><span class="p">]</span>
                    
                    
            <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">sampled_angles</span><span class="p">,</span> <span class="n">sampled_distance</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>            </div>
            

<div class="viewcode-block" id="QLabsQCar.destroy"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.destroy">[docs]</a>    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Destroys a QCar in an instance of QLabs.</span>

<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :return: The number of actors destroyed. -1 if failed.</span>
<span class="sd">        :rtype: int32</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">QLabsCommon</span><span class="p">()</span><span class="o">.</span><span class="n">destroy_spawned_actor</span><span class="p">(</span><span class="n">qlabs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">)</span></div>


<div class="viewcode-block" id="QLabsQCar.ping"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.ping">[docs]</a>    <span class="k">def</span> <span class="nf">ping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if a QCar of the corresponding actor number exists in the QLabs environment.</span>

<span class="sd">        :param qlabs: A QuanserInteractiveLabs object</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :return: `True` if actor is present, `False` otherwise</span>
<span class="sd">        :rtype: boolean</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">QLabsCommon</span><span class="p">()</span><span class="o">.</span><span class="n">ping_actor</span><span class="p">(</span><span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">)</span></div>

<div class="viewcode-block" id="QLabsQCar.get_world_transform"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.get_world_transform">[docs]</a>    <span class="k">def</span> <span class="nf">get_world_transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the location, rotation, and scale in world coordinates of the QCar</span>
<span class="sd">        </span>
<span class="sd">        :param qlabs: A QuanserInteractiveLabs object.</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :return: success, location, rotation in radians</span>
<span class="sd">        :rtype: boolean, float array[3], float array[3]</span>
<span class="sd">        &quot;&quot;&quot;</span>    
        <span class="n">success</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="n">QLabsCommon</span><span class="p">()</span><span class="o">.</span><span class="n">get_world_transform</span><span class="p">(</span><span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">)</span>

        <span class="k">return</span>  <span class="n">success</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span></div>

<div class="viewcode-block" id="QLabsQCar.get_world_transform_degrees"><a class="viewcode-back" href="../Objects/car_library.html#library_qlabs_qcar.QLabsQCar.get_world_transform_degrees">[docs]</a>    <span class="k">def</span> <span class="nf">get_world_transform_degrees</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the location, rotation, and scale in world coordinates of the QCar</span>
<span class="sd">        </span>
<span class="sd">        :param qlabs: A QuanserInteractiveLabs object.</span>
<span class="sd">        :param actorNumber: User defined unique identifier for the class actor in QLabs</span>
<span class="sd">        :type qlabs: QuanserInteractiveLabs object</span>
<span class="sd">        :type actorNumber: uint32</span>
<span class="sd">        :return: success, location, rotation in degrees</span>
<span class="sd">        :rtype: boolean, float array[3], float array[3]</span>
<span class="sd">        &quot;&quot;&quot;</span>    
        <span class="n">success</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="n">QLabsCommon</span><span class="p">()</span><span class="o">.</span><span class="n">get_world_transform</span><span class="p">(</span><span class="n">qlabs</span><span class="p">,</span> <span class="n">actorNumber</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID_QCAR</span><span class="p">)</span>
        <span class="n">rotation_deg</span> <span class="o">=</span> <span class="n">rotation_deg</span> <span class="o">=</span> <span class="p">[</span><span class="n">rotation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">,</span> <span class="n">rotation</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">180</span><span class="p">]</span>

        <span class="k">return</span>  <span class="n">success</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">rotation_deg</span></div></div>
        
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Quanser.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>